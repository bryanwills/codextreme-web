---
interface Tweak {
  name: string;
  description: string;
  registry?: string;
  benefit?: string;
  impact?: "low" | "medium" | "high";
}

interface Props {
  title: string;
  icon?: string;
  tweaks: Tweak[];
  color: string;
}

const { title, icon = "⚙️", tweaks, color } = Astro.props;

const impactColors = {
  low: "bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100",
  medium:
    "bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100",
  high: "bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100",
};
---

<div
  class={`optimizer-section bg-gradient-to-br ${color} rounded-lg shadow-md p-8`}
>
  <h3 class="text-3xl font-bold mb-2 text-white flex items-center gap-3">
    <span class="text-4xl">{icon}</span>
    {title}
  </h3>

  <div class="mt-8 space-y-6">
    {
      tweaks.map((tweak) => (
        <div class="optimizer-tweak bg-white dark:bg-gray-700 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow">
          <div class="flex justify-between items-start gap-4">
            <div class="flex-1">
              <h4 class="font-bold text-lg mb-2 text-gray-900 dark:text-white">
                {tweak.name}
              </h4>
              <p class="text-gray-700 dark:text-gray-300 mb-3">
                {tweak.description}
              </p>
            </div>
            {tweak.impact && (
              <span
                class={`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${impactColors[tweak.impact]}`}
              >
                {tweak.impact === "low"
                  ? "Bajo"
                  : tweak.impact === "medium"
                    ? "Medio"
                    : "Alto"}
              </span>
            )}
          </div>

          {tweak.registry && (
            <>
              <p class="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2">
                Registro:
              </p>
              <div class="optimizer-registry bg-gray-100 dark:bg-gray-800 rounded p-3 font-mono text-sm overflow-x-auto mb-3 border border-gray-300 dark:border-gray-600">
                <code class="text-gray-900 dark:text-gray-100">
                  {tweak.registry}
                </code>
              </div>
            </>
          )}

          {tweak.benefit && (
            <p class="text-sm text-green-700 dark:text-green-400">
              <strong>Beneficio:</strong> {tweak.benefit}
            </p>
          )}
        </div>
      ))
    }
  </div>
</div>
