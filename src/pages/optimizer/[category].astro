---
import BaseLayout from "@/layouts/BaseLayout.astro";
import TweakSection from "@/components/TweakSection.astro";

import { languageList } from "@/i18n/ui";
import { useTranslations } from "@/i18n/utils";
import { networkTweaks } from "@/data/networkTweaks";
import { memoryTweaks } from "@/data/memoryTweaks";
import { gpuTweaks } from "@/data/gpuTweaks";
import { windowsFeaturesTweaks } from "@/data/windowsFeaturesTweaks";
import { firewallSecurityTweaks } from "@/data/firewallSecurityTweaks";
import { nagleAlgorithmTweaks } from "@/data/nagleAlgorithmTweaks";
import { networkThrottlingTweaks } from "@/data/networkThrottlingTweaks";
import { systemResponsivenessTweaks } from "@/data/systemResponsivenessTweaks";
import { latencyAndTimersTweaks } from "@/data/latencyAndTimersTweaks";
import {
  TWEAK_CATEGORIES,
  CATEGORY_ICONS,
  CATEGORY_COLORS,
} from "@/data/tweakCategories";

export function getStaticPaths() {
  return TWEAK_CATEGORIES.map((category) => ({
    params: { category },
  }));
}

const currentLang = Astro.currentLocale || "en";
const t = useTranslations(currentLang as keyof typeof languageList);

const { category } = Astro.params;
const categoryColors_current =
  CATEGORY_COLORS[category as keyof typeof CATEGORY_COLORS];
const categoryIcon = CATEGORY_ICONS[category as keyof typeof CATEGORY_ICONS];

if (!category || !categoryColors_current || !categoryIcon) {
  return new Response("Not found", { status: 404 });
}

// Obtener los datos de tweaks seg√∫n la categor√≠a
let tweaksData: any = null;
if (category === "network") {
  tweaksData = networkTweaks;
} else if (category === "memory") {
  tweaksData = memoryTweaks;
} else if (category === "gpu") {
  tweaksData = gpuTweaks;
} else if (category === "windows_features") {
  tweaksData = windowsFeaturesTweaks;
} else if (category === "firewall_security") {
  tweaksData = firewallSecurityTweaks;
} else if (category === "nagle_algorithm") {
  tweaksData = nagleAlgorithmTweaks;
} else if (category === "network_throttling") {
  tweaksData = networkThrottlingTweaks;
} else if (category === "system_responsiveness") {
  tweaksData = systemResponsivenessTweaks;
} else if (category === "latency_timers") {
  tweaksData = latencyAndTimersTweaks;
}

const tweaks = currentLang === "en" ? tweaksData?.en : tweaksData?.es;
const categoryTitle = t(`optimizer.sections.${category}` as any);
---

<BaseLayout title={`${categoryTitle} - ${t("optimizer.title")} - CodeXtremeOS`}>
  <!-- Hero Section -->
  <section
    class="relative min-h-[40vh] flex items-center justify-center overflow-hidden bg-[#0a0a0a]"
  >
    <!-- Background Effects -->
    <div class="absolute inset-0">
      <div
        class={`absolute inset-0 bg-gradient-to-br ${categoryColors_current.color} opacity-20`}
      >
      </div>
      <div class="absolute inset-0 bg-[url('/grid-pattern.svg')] opacity-10">
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#0a0a0a] to-transparent"
      >
      </div>
    </div>

    <div class="container mx-auto text-center px-4 relative z-10 pt-20">
      <div class="max-w-4xl mx-auto">
        <a
          href="/optimizer"
          class="group inline-flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 backdrop-blur-sm"
        >
          <span class="group-hover:-translate-x-1 transition-transform">‚Üê</span>
          {t("optimizer.title")}
        </a>

        <h1 class="text-6xl md:text-7xl font-bold mb-8 tracking-tight">
          <span
            class={`bg-clip-text text-transparent bg-gradient-to-r ${categoryColors_current.textColor} drop-shadow-2xl`}
          >
            {categoryTitle}
          </span>
        </h1>

        <p
          class="text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto leading-relaxed"
        >
          {t("optimizer.hero_description")}
        </p>
      </div>
    </div>
  </section>

  <!-- Main Section -->
  <main class="bg-[#0a0a0a] min-h-screen py-12 relative">
    <div
      class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-7xl h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"
    >
    </div>

    <div class="container mx-auto px-4">
      {
        tweaks ? (
          <TweakSection
            tweaks={tweaks}
            title={categoryTitle}
            icon={categoryIcon}
            color={categoryColors_current.color}
            textColor={categoryColors_current.textColor}
          />
        ) : (
          <div class="max-w-2xl mx-auto mt-12">
            <div class="bg-yellow-500/5 border border-yellow-500/20 rounded-2xl p-12 text-center backdrop-blur-sm">
              <span class="text-4xl mb-4 block">üöß</span>
              <h3 class="text-xl font-bold text-yellow-200 mb-2">
                Work in Progress
              </h3>
              <p class="text-yellow-200/60">
                Content for {categoryTitle} is currently being optimized. Check
                back soon!
              </p>
            </div>
          </div>
        )
      }
    </div>
  </main>
</BaseLayout>
